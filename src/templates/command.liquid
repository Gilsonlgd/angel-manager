import { BaseCommand, Arg, RunnableArgs, renderTemplate } from 'angel-manager';

export default class {{ plural.pascal.commandName }} extends BaseCommand {
  /**
   * Command name is used to run the command
   */
  public commandName = 'make:{{ kebab.commandName }}';

  /**
   * Description of the command
   */
  public description = 'Makes a new {{ camel.commandName }}';

  /**
   * Liquid template path
   */
  public templatePath = '{{ plural.kebab.commandName }}';

  /**
   * Processed template destination path
   */
  public destinationPath = '{{ plural.kebab.commandName }}';

  /**
   * The extension of the component
   */
{%- if model.staticAttributes.extension and model.staticAttributes.extension.defaultValue %}
  public extension = '{{ model.staticAttributes.extension.defaultValue }}';
{% else %}
  public extension = 'tsx';
{% endif %}
  /**
   * If true, the template will be generated inside componentName directory
   */
{%- if model.staticAttributes.subDir and model.staticAttributes.subDir.defaultValue %}
  public subDir = {{ model.staticAttributes.subDir.defaultValue }};
{% else %}
  public subDir = false;
{% endif %}
  /**
   *
   * @returns an array of Arguments representing the arguments
   * to be passed to the command in the order they are defined
   */
  public args(): Arg[] {
    return [{ name: '{{ camel.commandName }}Name', type: 'string' }];
  }
{% raw %}
  public async run(args: RunnableArgs): Promise<void> {
    try {
      await renderTemplate(this, args);
    } catch (error) {
      console.error();
    }
  }
{% endraw -%}
}
